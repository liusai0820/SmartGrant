# lib/ æ¶æ„è¯´æ˜

> âš ï¸ **è‡ªæŒ‡å£°æ˜**ï¼šä¸€æ—¦æˆ‘æ‰€å±çš„æ–‡ä»¶å¤¹æœ‰æ‰€å˜åŒ–ï¼Œè¯·æ›´æ–°æˆ‘ã€‚

## æç®€æ¶æ„ï¼ˆ3è¡Œï¼‰
- **openrouter.ts** - æ ¸å¿ƒ AI èƒ½åŠ›å±‚ï¼Œå°è£…å¤šæ¨¡å‹è°ƒç”¨ä¸ Prompt å·¥ç¨‹
- **db.ts + supabase/** - æ•°æ®æŒä¹…åŒ–å±‚ï¼Œç®¡ç†é¡¹ç›®ã€è¯„å®¡ã€å¯¹è¯æ•°æ®
- **å·¥å…·æ¨¡å—**ï¼ˆwordExport, file-parser, tavilyï¼‰- ä¸“é¡¹èƒ½åŠ›ï¼šå¯¼å‡ºã€è§£æã€æœç´¢

---

## æ–‡ä»¶æ¸…å•

| åç§° | åœ°ä½ | åŠŸèƒ½ |
|------|------|------|
| `openrouter.ts` | â­ æ ¸å¿ƒ | OpenRouter API å°è£…ï¼Œå¤š Agent è¯„å®¡æ ¸å¿ƒé€»è¾‘ |
| `db.ts` | ğŸ’¾ æ•°æ® | ç»Ÿä¸€æ•°æ®åº“æ¥å£ï¼ŒLocalStorage é™çº§æ–¹æ¡ˆ |
| `supabase/` | ğŸ’¾ æ•°æ® | Supabase å®¢æˆ·ç«¯ä¸ Schema å®šä¹‰ |
| `wordExport.ts` | ğŸ“„ å¯¼å‡º | GB/T 9704-2012 å…¬æ–‡æ ¼å¼ Word ç”Ÿæˆ |
| `file-parser.ts` | ğŸ“‚ è§£æ | PDF/Word æ–‡ä»¶è§£æï¼Œæå–æ–‡æœ¬å†…å®¹ |
| `tavily.ts` | ğŸ” æœç´¢ | Tavily API å°è£…ï¼Œä¸“å®¶ä¿¡æ¯æœç´¢ |
| `utils.ts` | ğŸ”§ å·¥å…· | é€šç”¨å·¥å…·å‡½æ•°ï¼ˆcn æ ·å¼åˆå¹¶ç­‰ï¼‰ |

---

## supabase/ å­ç›®å½•æ¸…å•

| åç§° | åŠŸèƒ½ |
|------|------|
| `client.ts` | æµè§ˆå™¨ç«¯ Supabase å®¢æˆ·ç«¯ |
| `server.ts` | æœåŠ¡ç«¯ Supabase å®¢æˆ·ç«¯ |
| `schema.sql` | æ•°æ®åº“è¡¨ç»“æ„å®šä¹‰ |
| `schema-templates.sql` | è¯„å®¡æ¨¡æ¿æ•°æ® |

---

## æ¨¡å—ä¾èµ–å…³ç³»

```
API Routes
    â”‚
    â”œâ”€â”€â–¶ openrouter.ts â”€â”€â–¶ [OpenRouter API]
    â”œâ”€â”€â–¶ db.ts â”€â”€â–¶ supabase/client.ts â”€â”€â–¶ [Supabase]
    â”œâ”€â”€â–¶ tavily.ts â”€â”€â–¶ [Tavily API]
    â”œâ”€â”€â–¶ file-parser.ts â”€â”€â–¶ [pdf-parse, mammoth]
    â””â”€â”€â–¶ wordExport.ts â”€â”€â–¶ [docx]
```

---

*æœ€åæ›´æ–°ï¼š2025-12-24*
